---
#* Enables native ESPHome API with services
# WARN: Performing the scan will disconnect device from current WiFi
# Pawelo, 20221119, created as my framework based on !include statements
# Pawelo, 20241124, added scan_wifi service
# Pawelo, 20250126, changed to API key
# Pawelo, 20250913, added log message when running WiFi scan
# Pawelo, 20250913, moved scan_wifi service to separate file

api:
  reboot_timeout: 0s # 0s will disable reboot if no HA connected
  # password: !secret api_password
  encryption:
    key: !secret api_key
  services:
    # - service: scan_wifi
    #   then:
    #     - lambda: |-
    #         ESP_LOGI("scan_wifi", "HA: Starting WiFi scan... please expect ${devicename} will be disconnected from current WiFi.");
    #         ESP_LOGI("scan_wifi", "You will be able to review WiFi scan results after connection to current WiFi is back (please refresh).");
    #         wifi::global_wifi_component->start_scanning();
    - !include { file: api_services/scan_wifi.yaml, vars: { } }
