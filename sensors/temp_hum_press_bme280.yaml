---
#* Temperature, Humidity and Pressure sensor BME280 configuration
# Pawelo, 20221203, created based on framework and https://esphome.io/components/sensor/bme280.html
# Pawelo, 20230101, calibrating temp/humid sensors as it's in tight enclosure
# Pawelo, 20230103, removed calibration as sensor is out of enclosure now
# Pawelo, 20230104, adjusted calibration temp and humid after 1d observations
# Pawelo, 20230107, adjusted calibration pressure after 1w observations

platform: bme280
temperature:
  name: "$room Temperature"
  id: temp
  oversampling: 16x
  accuracy_decimals: 2
  filters:
    - offset: -2.1
  state_topic: $devicename/temperature
  on_value:
    - mqtt.publish:
        topic: "$mqtt_location/$mqtt_room/temperature"
        payload: !lambda |-
          return to_string(id(temp).state);
humidity:
  name: "$room Humidity"
  id: hum
  oversampling: 16x
  accuracy_decimals: 2
  filters:
    - offset: +9.2
  state_topic: $devicename/humidity
  on_value:
    - mqtt.publish:
        topic: "$mqtt_location/$mqtt_room/humidity"
        payload: !lambda |-
          return to_string(id(hum).state);
pressure:
  name: "$room Pressure"
  id: press
  oversampling: 16x
  accuracy_decimals: 2
  filters:
    - offset: 8.0
  state_topic: $devicename/pressure
  on_value:
    - mqtt.publish:
        topic: "$mqtt_location/$mqtt_room/pressure"
        payload: !lambda |-
          return to_string(id(press).state);
address: 0x76
#iir_filter: 2x
update_interval: $updates