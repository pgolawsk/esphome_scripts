---
#* Illuminance and Color sensor TCS3472 configuration
# Pawelo, 20230103, created based on https://esphome.io/components/sensor/tcs34725.html and lux_bh1750.yaml a
# Pawelo, 20230111, added i2c bus identification
# Pawelo, 20230121, add variables to configure sensor

platform: tcs34725
illuminance:
  name: "$room Illuminance${ix}"
  accuracy_decimals: 1
  id: lux${ix}
  icon: mdi:decagram-outline
  state_topic: $devicename/illuminance${ix}
  on_value:
    - mqtt.publish:
        topic: "$mqtt_location/$mqtt_room/illuminance${ix}"
        payload: !lambda |-
          return to_string(id(lux${ix}).state);
red_channel:
  name: "$room Channel Red"
  id: red
  icon: mdi:palette
  state_topic: $devicename/red
  on_value:
    - mqtt.publish:
        topic: "$mqtt_location/$mqtt_room/red"
        payload: !lambda |-
          return to_string(id(red).state);
green_channel:
  name: "$room Channel Green"
  id: green
  icon: mdi:palette
  state_topic: $devicename/green
  on_value:
    - mqtt.publish:
        topic: "$mqtt_location/$mqtt_room/green"
        payload: !lambda |-
          return to_string(id(green).state);
blue_channel:
  name: "$room Channel Blue"
  id: blue
  icon: mdi:palette
  state_topic: $devicename/blue
  on_value:
    - mqtt.publish:
        topic: "$mqtt_location/$mqtt_room/blue"
        payload: !lambda |-
          return to_string(id(blue).state);
clear_channel:
  name: "$room Channel Clear"
  id: clear
  icon: mdi:palette-outline
  state_topic: $devicename/clear
  on_value:
    - mqtt.publish:
        topic: "$mqtt_location/$mqtt_room/clear"
        payload: !lambda |-
          return to_string(id(clear).state);
color_temperature:
  name: "$room Color Temperature"
  id: color
  icon: mdi:temperature-kelvin
  state_topic: $devicename/color_temp
  on_value:
    - mqtt.publish:
        topic: "$mqtt_location/$mqtt_room/color_temp"
        payload: !lambda |-
          return to_string(id(color).state);
glass_attenuation_factor: 1.0
i2c_id: ${bus_id}
#address: 0x29
address: ${address}
update_interval: $updates